var locationUrl="";locationUrl=window.location.href;function importJsOrCssFile(a,b){if("js"==b){var c=document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src",a)}else if("css"==b){var c=document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a)}"undefined"!=typeof c&&document.getElementsByTagName("head")[0].appendChild(c)}function homeLibFunctionality(){var a=document.getElementById("libFrame"),b=document.createElement("style");b.type="text/css",b.innerHTML="#libFrame { transition: height 500ms;}",document.head.appendChild(b),window.addEventListener("message",function(b){var c=b.data;if("resize"===c.type){var d=c.value,e=window.innerWidth,f=50;370>e?f=245:470>e?f=200:611>e?f=180:768>e?f=170:1340>e&&(f=190),d+=50,520>d&&(d=520),767<$(window).width()&&setTimeout(function(){var a=$("#keskiNewsUl").height();a=$(".news-page-link-container").height()+a,a=Math.floor(a);var b=$("#libFrame").height();b<a&&140>a-b&&(d=a+17,$("#libFrame").css("height",d+"px"),$("#libFrame").attr("height",d+"px"))},1e3),a.style.height=d+"px"}else if("redirect"===c.type)try{window.location.href=c.value}catch(a){console.log("Redirect failed: "+a)}})}function decodeVal(a){return isValue(a)?(a=decodeURI(a),a=a.toLowerCase(),a):a}function isValue(a){if(null!==a&&void 0!==a&&0!==a.length&&!isNaN(a)&&"NaN"!==a&&"undefined"!==a||""!==$.trim(a)){if("number"==typeof a)return!0;var b=a.replace(/<p>/g,"");return b=b.replace(/<\/p>/g,""),b=$.trim(b),1<=b.length}return!1}window.tileLayer||(console.log("Load Leaflet tile fallback."),importJsOrCssFile("https://keski-finna.fi/external/finna/js/dist/leaflet.tilelayer.fallback.js","js")),window.i18n||(-1<locationUrl.indexOf("a-pre.fi")?require("https://keski-finna.fi/external/finna/js/jquery.translate.js",loadPolyfills()):require("https://keski-finna.fi/external/finna/js/dist/jquery.translate.js",loadPolyfills()));function loadPolyfills(){-1<navigator.userAgent.indexOf("MSIE ")||-1<navigator.userAgent.indexOf("Trident/")?require("https://polyfill.io/v3/polyfill.min.js?features=es2015%2Ces2016%2Ces2017%2Ces5%2Ces6%2CArray.prototype.includes%2CString.prototype.includes%2Cdefault%2Cblissfuljs%2CArray.of%2CArray.prototype.some%2CNumber.EPSILON%2Cdocument%2CArray.prototype.every%2CArray.prototype.fill%2CArray.prototype.filter%2CArray.prototype.find%2CArray.prototype.forEach%2CArray.prototype.reduce%2CArray.prototype.lastIndexOf%2CArray.prototype.indexOf%2CscrollIntoView%2CscrollX%2CscrollY%2CArray.isArray%2CArray.from%2Ces7%2Ces2019%2Ces2018",loadContentScripts()):loadContentScripts()}function loadContentScripts(){setTimeout(function(){return-1<locationUrl.indexOf("a-pre.fi")?void importJsOrCssFile("https://keski-finna.fi/external/finna/js/newsTest.js","js"):void importJsOrCssFile("https://keski-finna.fi/external/finna/js/dist/news.js","js")},1400)}var isIOS=!1,testSafari=navigator.vendor&&-1<navigator.vendor.indexOf("Apple")&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS");(testSafari||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(isIOS=!0);var isIPad=null!=navigator.userAgent.match(/iPad/i),isIPhone=null!=navigator.userAgent.match(/iPhone/i)||null!=navigator.userAgent.match(/iPod/i);(isIPad||isIPhone)&&(isIOS=!0);function require(a,b){var c=document.createElement("script");c.src=a,c.type="text/javascript",c.addEventListener("load",b),document.getElementsByTagName("head")[0].appendChild(c)}1===$(".keski-news-home").length&&homeLibFunctionality();function main(){1===$(".keski-news-home").length&&homeLibFunctionality()}$(document).ready(function(){main()});
